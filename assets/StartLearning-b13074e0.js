import{k as b,u as A,r,q as H,h as be,i as s,f as he,j as l,b as me}from"./index-eb0cc021.js";import{o as ae,Q as pe}from"./QuizStore-851f4be0.js";import{C as Y}from"./Button-1b40be0b.js";import{H as ve}from"./HomePage-7bd6d868.js";import{S as Ce}from"./chunk-ZHMYA64R-5b081061.js";import{T as Z}from"./chunk-2OOHT3W5-ad8da04b.js";import{F as $}from"./chunk-KRPLQIP4-66c275ea.js";import{u as ge,t as ye,S as ke}from"./StyledCustomRadios-4d3c8f57.js";import{m as ee}from"./index-a8927ce7.js";import xe from"./Modal-565358f0.js";import{u as Se,a as Ie,T as te}from"./Toast-20044913.js";import"./Container-e775710d.js";import"./chunk-7OLJDQMT-99829210.js";import"./iconBase-b434aaf5.js";import"./chunk-UVUR7MCU-fb97ea5d.js";import"./chunk-3ASUQ6PA-14f1e64e.js";import"./chunk-ROURZMX4-c7157920.js";function Fe(i){var h,a,n;const t=ge(),{id:o,disabled:u,readOnly:c,required:y,isRequired:x,isInvalid:m,isReadOnly:I,isDisabled:k,onFocus:j,onBlur:f,...F}=i,p=i["aria-describedby"]?[i["aria-describedby"]]:[];return t!=null&&t.hasFeedbackText&&(t!=null&&t.isInvalid)&&p.push(t.feedbackId),t!=null&&t.hasHelpText&&p.push(t.helpTextId),{...F,"aria-describedby":p.join(" ")||void 0,id:o??(t==null?void 0:t.id),isDisabled:(h=u??k)!=null?h:t==null?void 0:t.isDisabled,isReadOnly:(a=c??I)!=null?a:t==null?void 0:t.isReadOnly,isRequired:(n=y??x)!=null?n:t==null?void 0:t.isRequired,isInvalid:m??(t==null?void 0:t.isInvalid),onFocus:b(t==null?void 0:t.onFocus,j),onBlur:b(t==null?void 0:t.onBlur,f)}}var De={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"};function je(i,h=[]){const a=Object.assign({},i);for(const n of h)n in a&&delete a[n];return a}function Pe(i={}){const h=Fe(i),{isDisabled:a,isReadOnly:n,isRequired:t,isInvalid:o,id:u,onBlur:c,onFocus:y,"aria-describedby":x}=h,{defaultChecked:m,isChecked:I,isFocusable:k,onChange:j,isIndeterminate:f,name:F,value:p,tabIndex:z=void 0,"aria-label":K,"aria-labelledby":U,"aria-invalid":E,...se}=i,M=je(se,["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),q=A(j),_=A(c),V=A(y),[w,ne]=r.useState(!1),[S,L]=r.useState(!1),[P,N]=r.useState(!1),[R,D]=r.useState(!1);r.useEffect(()=>ye(ne),[]);const C=r.useRef(null),[Q,re]=r.useState(!0),[ie,T]=r.useState(!!m),O=I!==void 0,d=O?I:ie,W=r.useCallback(e=>{if(n||a){e.preventDefault();return}O||T(d?e.target.checked:f?!0:e.target.checked),q==null||q(e)},[n,a,d,O,f,q]);H(()=>{C.current&&(C.current.indeterminate=!!f)},[f]),be(()=>{a&&L(!1)},[a,L]),H(()=>{const e=C.current;if(!(e!=null&&e.form))return;const v=()=>{T(!!m)};return e.form.addEventListener("reset",v),()=>{var g;return(g=e.form)==null?void 0:g.removeEventListener("reset",v)}},[]);const G=a&&!k,X=r.useCallback(e=>{e.key===" "&&D(!0)},[D]),J=r.useCallback(e=>{e.key===" "&&D(!1)},[D]);H(()=>{if(!C.current)return;C.current.checked!==d&&T(C.current.checked)},[C.current]);const le=r.useCallback((e={},v=null)=>{const g=B=>{S&&B.preventDefault(),D(!0)};return{...e,ref:v,"data-active":s(R),"data-hover":s(P),"data-checked":s(d),"data-focus":s(S),"data-focus-visible":s(S&&w),"data-indeterminate":s(f),"data-disabled":s(a),"data-invalid":s(o),"data-readonly":s(n),"aria-hidden":!0,onMouseDown:b(e.onMouseDown,g),onMouseUp:b(e.onMouseUp,()=>D(!1)),onMouseEnter:b(e.onMouseEnter,()=>N(!0)),onMouseLeave:b(e.onMouseLeave,()=>N(!1))}},[R,d,a,S,w,P,f,o,n]),ce=r.useCallback((e={},v=null)=>({...e,ref:v,"data-active":s(R),"data-hover":s(P),"data-checked":s(d),"data-focus":s(S),"data-focus-visible":s(S&&w),"data-indeterminate":s(f),"data-disabled":s(a),"data-invalid":s(o),"data-readonly":s(n)}),[R,d,a,S,w,P,f,o,n]),de=r.useCallback((e={},v=null)=>({...M,...e,ref:ee(v,g=>{g&&re(g.tagName==="LABEL")}),onClick:b(e.onClick,()=>{var g;Q||((g=C.current)==null||g.click(),requestAnimationFrame(()=>{var B;(B=C.current)==null||B.focus({preventScroll:!0})}))}),"data-disabled":s(a),"data-checked":s(d),"data-invalid":s(o)}),[M,a,d,o,Q]),ue=r.useCallback((e={},v=null)=>({...e,ref:ee(C,v),type:"checkbox",name:F,value:p,id:u,tabIndex:z,onChange:b(e.onChange,W),onBlur:b(e.onBlur,_,()=>L(!1)),onFocus:b(e.onFocus,V,()=>L(!0)),onKeyDown:b(e.onKeyDown,X),onKeyUp:b(e.onKeyUp,J),required:t,checked:d,disabled:G,readOnly:n,"aria-label":K,"aria-labelledby":U,"aria-invalid":E?!!E:o,"aria-describedby":x,"aria-disabled":a,style:De}),[F,p,u,W,_,V,X,J,t,d,G,n,K,U,E,o,x,a,z]),fe=r.useCallback((e={},v=null)=>({...e,ref:v,onMouseDown:b(e.onMouseDown,Re),"data-disabled":s(a),"data-checked":s(d),"data-invalid":s(o)}),[d,a,o]);return{state:{isInvalid:o,isFocused:S,isChecked:d,isActive:R,isHovered:P,isIndeterminate:f,isDisabled:a,isReadOnly:n,isRequired:t},getRootProps:de,getCheckboxProps:le,getIndicatorProps:ce,getInputProps:ue,getLabelProps:fe,htmlProps:M}}function Re(i){i.preventDefault(),i.stopPropagation()}var oe=he((i,h)=>l.jsx(Ce,{align:"center",...i,direction:"column",ref:h}));oe.displayName="VStack";const we=ae(({allTopics:i,onChange:h})=>{const[a,n]=r.useState([]),t=o=>{a.includes(o)?n(a.filter(u=>u!==o)):n([...a,o])};return l.jsx(oe,{children:l.jsx($,{gap:"10px",flexWrap:"wrap",children:i.map(o=>{const{state:u,getCheckboxProps:c,getInputProps:y,getLabelProps:x,htmlProps:m}=Pe();return l.jsxs(me.label,{onChange:()=>{t(o),h(o)},position:"relative",display:"flex",flexDirection:"row",alignItems:"center",gridColumnGap:2,maxW:"auto",bg:u.isChecked?"var(--secondaryColor)":"var(--bg)",border:"1px solid",borderColor:"var(--bg)",px:3,py:1,pr:"3rem",fontFamily:"var(--secondaryFont)",fontSize:"1.1rem",fontWeight:"medium",cursor:"pointer",transition:"var(--transition)",...m,children:[l.jsx("input",{...y(),hidden:!0}),l.jsx(Z,{color:"gray.700",...x(),children:o}),l.jsx($,{opacity:u.isChecked?1:0,position:"absolute",top:"0",right:"0",alignItems:"center",justifyContent:"center",borderColor:"var(--mainColor)",bg:"var(--mainColor)",color:"white",w:"2rem",h:"100%",transition:"var(--transition)",...c(),children:l.jsx(Z,{children:l.jsx(ve,{})})})]},o)})})})}),Xe=ae(({children:i})=>{const[h,a]=r.useState([]),[n,t]=r.useState(!1),[o,u]=r.useState(!1),c=pe,y=Se(),x=c.getAllCategories(),m=c.selectedCategory,I=c.selectedTopics,k=Ie();r.useEffect(()=>{n&&(a([]),k.onOpen()),k.isOpen||(t(!1),u(!1))},[n,k]);const j=()=>{if(m==="")return te({toast:y,title:"Please select a category!",position:"top"});{const p=c.getAllTopics(m);a(p)}if(I.length===0&&o)return te({toast:y,title:"Please select at least one topic!",position:"top"});m!==""&&I.length>0&&(c.setStartQuiz(),k.onClose()),u(!0)},f=p=>{c.setTopic(p)},F=p=>{c.setCategory(p)};return l.jsxs(l.Fragment,{children:[l.jsx(Y,{onClickHandler:()=>{t(!0)},children:i}),l.jsxs(xe,{disclosure:k,modalTitle:m?"Choose your favorite topics":"Choose your category",styles:{display:"flex",flexDirection:"column",alignItems:"center",gap:"20px"},children:[o?l.jsx(we,{allTopics:h,onChange:f}):l.jsx(ke,{options:x,onChange:F,stackStyle:{gap:"20px",flexWrap:"wrap",justifyContent:"center"}}),l.jsx(Y,{onClickHandler:j,children:"Next"})]})]})});export{Xe as default};
