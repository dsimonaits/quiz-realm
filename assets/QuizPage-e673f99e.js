import{r as s,_ as w,s as C,j as o,L as g}from"./index-352edc63.js";import{o as z,Q as v}from"./QuizStore-ef15fdd3.js";import{S as O,M as N}from"./Container-42bf59d7.js";import{u as T,a as q}from"./chunk-CHB4ZXZG-9bf611ce.js";const D=a=>{const n=[...a];for(let e=n.length-1;e>0;e--){const l=Math.floor(Math.random()*(e+1));[n[e],n[l]]=[n[l],n[e]]}return n};function I({dataSetName:a,dependencies:n}){const e=s.useRef(null);return s.useEffect(()=>{const l=document.querySelectorAll(`div[${a}]`);e.current=Array.from(l)},[n]),e}const M=s.lazy(()=>w(()=>import("./Modal-89568606.js"),["assets/Modal-89568606.js","assets/index-352edc63.js","assets/index-dc1fd693.css","assets/index-fca8f731.js","assets/chunk-ROURZMX4-c7157920.js"])),L=s.lazy(()=>w(()=>import("./QuizResult-e046090e.js"),["assets/QuizResult-e046090e.js","assets/index-352edc63.js","assets/index-dc1fd693.css","assets/Button-e340e9ba.js","assets/Container-42bf59d7.js","assets/chunk-3ASUQ6PA-1cfc7f2a.js","assets/chunk-ZHMYA64R-7431e83c.js"])),P=s.lazy(()=>w(()=>import("./QuizQuestion-e9ee465d.js"),["assets/QuizQuestion-e9ee465d.js","assets/index-352edc63.js","assets/index-dc1fd693.css","assets/Button-e340e9ba.js","assets/Container-42bf59d7.js","assets/StyledCustomRadios-163dc350.js","assets/index-fca8f731.js","assets/chunk-3ASUQ6PA-1cfc7f2a.js","assets/chunk-ZHMYA64R-7431e83c.js","assets/chunk-2OOHT3W5-2fb33501.js"])),Y=z(()=>{const[a,n]=s.useState(0),[e,l]=s.useState(null),[d,E]=s.useState(!1),[h,A]=s.useState("idle"),[m,S]=s.useState("Select"),[p,R]=s.useState([]),t=v,i=t.StartQuizData,c=C(),x=T(),u=q(),j=()=>{u.onClose(),t.resetStore(),c("/")};s.useEffect(()=>{if(i.length===0&&c("/"),i.length<a+1){E(!0),u.onOpen();return}i.length!==0&&l(i[a])},[a,c,i,u]),s.useEffect(()=>{d&&!u.isOpen&&c("/")},[d,u,c]),s.useEffect(()=>{e&&R(D(Object.values(e.answers)))},[e]);const _=I({dataSetName:"data-answer",dependencies:p}).current;s.useEffect(()=>{h!=="idle"&&_!==null&&_.map(r=>{const f=r.getAttribute("data-answer");f!==(e==null?void 0:e.answers.answer)&&f===t.selectedAnswer?r.style.backgroundColor="red":f===t.selectedAnswer?r.style.backgroundColor="green":f===(e==null?void 0:e.answers.answer)&&(r.style.backgroundColor="green",r.style.color="white")})},[m,h,x]);const b=r=>{t.setAnswer(r)},y=()=>{if(t.selectedAnswer==="")return x({title:"You forgot to answer!",position:"top"});if(m!=="Next"){const r=t.selectedAnswer===(e==null?void 0:e.answers.answer);A(r),S("Next"),r?t.setUserResult(!0):t.setUserResult(!1);return}t.setAnswer(""),n(a+1),S("Select"),A("idle")};return o.jsx(s.Suspense,{fallback:o.jsx(g,{}),children:o.jsx(O,{children:o.jsx(N,{children:d?o.jsx(M,{modalTitle:"Your Score",disclosure:u,children:o.jsx(L,{result:t.userResult,btnHandle:j})}):o.jsx(o.Fragment,{children:e?o.jsx(P,{question:e.question,answers:p,buttonText:m,handleOnChange:b,handleOnNext:y}):o.jsx(g,{})})})})})});export{Y as default};
